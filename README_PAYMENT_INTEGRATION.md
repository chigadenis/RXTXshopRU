# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏:

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ paymentService.ts      # API —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ usePayment.ts          # React Hook –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ PaymentModalReal.tsx   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã –æ–ø–ª–∞—Ç—ã
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ webhookHandler.ts      # –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ pages/Index.tsx           # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (`.env.example`):
```env
REACT_APP_PAYMENT_API_KEY=your_api_key
REACT_APP_PAYMENT_PROVIDER=yookassa
REACT_APP_API_BASE_URL=https://your-backend.com
```

2. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**:
- –ÆKassa (YooMoney)
- –°–±–µ—Ä–±–∞–Ω–∫
- –¢–∏–Ω—å–∫–æ—Ñ—Ñ
- CloudPayments

### üöÄ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (Backend)

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```
POST /api/payments/create     # –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
GET  /api/payments/status/:id # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
POST /api/payments/cancel/:id # –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
GET  /api/payments/methods    # –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã
POST /api/webhooks/payment    # Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### üí≥ –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã

- **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã** - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–∞–Ω–∫–∞
- **QR-–∫–æ–¥—ã** - —Å—Ç–∞—Ç–∏—á–Ω—ã–π QR –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–°–ë–ü** - —Å–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

### üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞**: `paymentService.createPayment()`
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫
3. **Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞**: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: success/failure + –æ—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–∞–ª–∏–¥–∞—Ü–∏—è webhook –ø–æ–¥–ø–∏—Å–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ timestamp (–∑–∞—â–∏—Ç–∞ –æ—Ç replay)
- API –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### üìã –î–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∞

```typescript
interface PaymentRequest {
  items: CartItem[];           # –¢–æ–≤–∞—Ä—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
  totalAmount: number;         # –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ
  currency: 'RUB';            # –í–∞–ª—é—Ç–∞
  customer: {                 # –î–∞–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
    email: string;
    phone: string;
    name?: string;
  };
  paymentMethod: 'card' | 'qr' | 'sbp';
  returnUrl: string;          # URL –≤–æ–∑–≤—Ä–∞—Ç–∞
  webhookUrl: string;         # URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
}
```

### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
import { usePayment } from '@/hooks/usePayment';

const { createPayment, isLoading, error } = usePayment();

// –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
const result = await createPayment({
  items: cart,
  totalAmount: 1000,
  customer: { email: "user@email.com", phone: "+79991234567" },
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
});
```

### ‚úÖ Ready –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ Error handling
- ‚úÖ Loading —Å–æ—Å—Ç–æ—è–Ω–∏—è  
- ‚úÖ Webhook –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ backend —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ sandbox —Ä–µ–∂–∏–º–µ